/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'checkstyle'
}

repositories {
    mavenLocal()
    maven {
        url = 'http://repo.maven.apache.org/maven2'
    }
}
sourceSets {
    main {
        java.srcDir "main/java"
        resources.srcDir "main/java"
    }
    test {
        java.srcDir "test/java"
        resources {
            srcDir "test"
            include 'log4j2.properties'
        }
    }
}
def configDir = "${rootDir}/config"

checkstyle {
    toolVersion '8.19'
    configFile file("$configDir/checkstyle/checkstyle.xml")
    configProperties.checkstyleSuppressionsPath = file("$configDir/checkstyle/suppressions.xml").absolutePath
}

checkstyleMain {
    source = 'src/main/java'
}

checkstyleTest {
    source = 'src/test/java'
}

dependencies {
    testCompile 'org.testng:testng:7.0.0-beta7'
    compile group: 'org.assertj', name: 'assertj-core', version: '3.12.2'
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.12.0'
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.12.0'
    compile group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '4.0.0-alpha-2'
}

group = 'io.test'
version = '1.0-SNAPSHOT'
sourceCompatibility = '1.8'

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

test {
    dependsOn checkstyle
    environment("logpath", "$buildDir/log/")
    useTestNG() {
        options {
            suites 'src/test/resources/testng.xml'
        }
    }
    reports.html.setDestination(file("$buildDir/html"))
    testLogging {
        events "PASSED", "FAILED", "SKIPPED"
    }
}
